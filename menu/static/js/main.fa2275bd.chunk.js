(this["webpackJsonpmenu-dev"]=this["webpackJsonpmenu-dev"]||[]).push([[0],{132:function(e,t,n){e.exports=n(218)},137:function(e,t,n){},139:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(7),i=n.n(l),o=(n(137),n(138),n(139),n(225)),s=n(51),u=n(23),c=n(117),m=n(118),g=n(127),d=n(119),p=n(129),f=n(9),h=n.n(f),y=n(89),v=n(224),x=n(223),E=n(221),C=n(125),b=n(13),M=n(55),D=new M.MDiningPromiseClient("https://michigan-dining-api.herokuapp.com"),w=n(222),H=function(e){var t=e.category;return r.a.createElement("div",null,r.a.createElement("h2",{style:{fontSize:"12pt",margin:"2px",marginTop:"10px",fontWeight:600}},t.getName()),r.a.createElement(x.a,{style:{boxShadow:"0px 0px 4px 0px rgba(0, 0, 0, 0.1)",borderRadius:"5px"},bodyStyle:{padding:"10px"}},r.a.createElement(w.a,{itemLayout:"horizontal",dataSource:t.getMenuitemList(),size:"small",split:!1,renderItem:function(e){return r.a.createElement(w.a.Item,{style:{padding:"0px"}},r.a.createElement(w.a.Item.Meta,{style:{padding:"0px"},description:r.a.createElement("div",null,r.a.createElement("h4",{style:{padding:"0px",margin:"0px"}},e.getName()),r.a.createElement("p",{style:{margin:"0px",padding:"0px",display:"block"}},r.a.createElement("i",null,e.getAttributeList().reduce((function(e,t){return"".concat(e," ").concat(t)}),"")," - "),r.a.createElement("i",null,e.getAllergensList().reduce((function(e,t){return"".concat(e," ").concat(t)}),""))))}))}})))},S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(g.a)(this,Object(d.a)(t).call(this,e))).state={diningHalls:[],menus:[],selectedCampus:"DINING HALLS",selectedDiningHall:0,selectedDate:h()(),selectedMenu:0,loading:!0},n.menuCache={},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.getDiningHalls(new M.DiningHallsRequest).then((function(t){var n=t.getDininghallsList(),a=n.findIndex((function(e){return"Bursley Dining Hall"===e.getName()}));e.setState({diningHalls:n,selectedDiningHall:a},(function(){return e.fetchMenu()}))})).catch((function(e){return console.log(e)}))}},{key:"getStartTimeOfMeal",value:function(e){var t=this.state,n=t.selectedDiningHall,a=t.selectedDate,r=t.diningHalls,l=t.menus,i=0===r.length||0===l.length?null:r[n].getDayeventsList().find((function(e){return h()(e.getKey()).day()===a.day()})),o=i?i.getCalendareventList().find((function(t){return t.getEventtitle().toLowerCase()===e.toLowerCase()})):null;return o?h()(o.getEventtimestart()):null}},{key:"firstMenuWithCategories",value:function(e){var t=e.findIndex((function(e){return e.getHascategories()}));return-1===t?0:t}},{key:"fetchMenu",value:function(){var e=this,t=this.state,n=t.diningHalls,a=t.selectedCampus,r=t.selectedDiningHall,l=t.selectedDate;if(0!==n.length){var i=a+r+l.format("YYYY-MM-DD");if(this.menuCache.hasOwnProperty(i)){var o=this.menuCache[i];this.setState({menus:o,selectedMenu:this.firstMenuWithCategories(o)})}else{var s=new M.MenuRequest;s.setDate(l.format("YYYY-MM-DD")),s.setDininghall(n[r].getName()),s.setMeal(null),this.setState({loading:!0}),D.getMenu(s).then((function(t){var n=t.getMenusList();e.menuCache[i]=n,e.setState({menus:n,selectedMenu:e.firstMenuWithCategories(n),loading:!1})})).catch((function(e){return console.log(e)}))}}}},{key:"onChangeDate",value:function(e){var t=this;this.setState({selectedDate:e},(function(){return t.fetchMenu()}))}},{key:"onChangeDiningHall",value:function(e){var t=this;this.setState({selectedDiningHall:e},(function(){return t.fetchMenu()}))}},{key:"onChangeCampus",value:function(e){var t=this,n=this.state.diningHalls.findIndex((function(t){return t.getCampus()===e}));this.setState({selectedCampus:e,selectedDiningHall:n},(function(){return t.fetchMenu()}))}},{key:"renderCategories",value:function(){var e=this.state,t=e.selectedMenu,n=e.menus;if(0===n.length)return r.a.createElement("b",null,"There's no data for this date :(");var a=n[t];return a.getHascategories()?a.getCategoryList().map((function(e){return r.a.createElement(H,{key:e.getName(),category:e})})):r.a.createElement("b",null,a.getDescription())}},{key:"render",value:function(){var e=this,t=this.props.style,n=this.state,a=n.selectedCampus,l=n.selectedDiningHall,i=n.selectedDate,o=n.selectedMenu,c=n.diningHalls,m=n.menus,g=n.loading,d=Array.from(new Set(c.map((function(e){return e.getCampus()})))).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return r.a.createElement(v.a.Button,{key:e,value:e},e)})),p=c.map((function(e,t){return{idx:t,diningHall:e}})).sort((function(e,t){return e.diningHall.getName().localeCompare(t.diningHall.getName())})).filter((function(e){return e.diningHall.getCampus()===a})).map((function(e){return r.a.createElement(v.a.Button,{style:{minWidth:205},key:e.idx,value:e.idx},e.diningHall.getName())})),f=0===c.length||0===m.length?null:c[l].getDayeventsList().find((function(e){return h()(e.getKey()).day()===i.day()})),M=f?f.getCalendareventList().find((function(e){return e.getEventtitle().toLowerCase()===m[o].getMeal().toLowerCase()||"open"===e.getEventtitle().toLowerCase()})):null,D=M?h()(M.getEventtimestart()):h()(),w=M?h()(M.getEventtimeend()):h()(),H=null,S=D.format("h:mma"),k=w.format("h:mma");h()().isBetween(D.clone().subtract(24,"hours"),w.clone().add(24,"hours"))&&(H=h()().isBefore(D)?"Opens "+D.fromNow():h()().isBefore(w)?"Closes "+w.fromNow():"Closed "+w.fromNow()+" :(");var L=m.map((function(t,n){return{idx:n,meal:t.getMeal(),startTime:e.getStartTimeOfMeal(t.getMeal())}})).sort((function(e,t){return e.startTime&&t.startTime?e.startTime.isBefore(t.startTime)?-1:e.meal.localeCompare(t.meal):e.startTime?-1:t.startTime?1:e.meal.localeCompare(t.meal)})).map((function(e){return r.a.createElement(v.a.Button,{style:{minWidth:125},key:e.idx,value:e.idx},e.meal)}));return r.a.createElement("div",{className:"Menu",style:t},r.a.createElement(s.a,{type:"flex",justify:"center"},r.a.createElement(u.a,{span:23},r.a.createElement(x.a,{style:{boxShadow:"0px 0px 4px 0px rgba(0, 0, 0, 0.1)",borderRadius:"5px",padding:"0px"},bodyStyle:{padding:"10px"}},r.a.createElement(v.a.Group,{style:{maxWidth:800,margin:"5px"},value:a,buttonStyle:"solid",onChange:function(t){return e.onChangeCampus(t.target.value)}},d),r.a.createElement(y.MobileView,null,r.a.createElement("input",{style:{margin:"5px",fontSize:"16px"},type:"date",value:i.format("YYYY-MM-DD"),onChange:function(t){return e.onChangeDate(h()(t.target.value))}})),r.a.createElement(y.BrowserView,{style:{display:"inline-block"}},r.a.createElement(E.a,{style:{margin:"5px"},value:i,onChange:function(t){return e.onChangeDate(t)},allowClear:!1})),r.a.createElement(v.a.Group,{style:{maxWidth:800,margin:"5px"},value:l,buttonStyle:"solid",onChange:function(t){return e.onChangeDiningHall(t.target.value)}},p),r.a.createElement("br",null),r.a.createElement(v.a.Group,{style:{maxWidth:400,margin:"5px"},value:o,buttonStyle:"solid",onChange:function(t){return e.setState({selectedMenu:t.target.value})}},L)))),r.a.createElement("br",null),r.a.createElement(C.a,{indicator:r.a.createElement(b.a,{type:"loading",style:{fontSize:24},spin:!0}),spinning:g},r.a.createElement(s.a,{type:"flex",justify:"center"},r.a.createElement(u.a,{span:23},r.a.createElement(x.a,{style:{boxShadow:"0px 0px 4px 0px rgba(0, 0, 0, 0.1)",borderRadius:"5px",padding:"0px"},bodyStyle:{padding:"10px"}},M?r.a.createElement("p",null,H,r.a.createElement("br",null),r.a.createElement("i",null,"Hours: ",S," - ",k)):null,this.renderCategories())))))}}]),t}(a.Component),k=o.a.Header,L=o.a.Footer,N=o.a.Content;var W=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,{style:{backgroundColor:"transparent"}},r.a.createElement(k,{style:{backgroundColor:"transparent",fontSize:"18pt",fontWeight:600}},"MDining Menus"),r.a.createElement(N,{style:{backgroundColor:"transparent"}},r.a.createElement(s.a,{type:"flex",justify:"center"},r.a.createElement(u.a,null,r.a.createElement(S,{style:{maxWidth:"700px"}})))),r.a.createElement(L,{style:{backgroundColor:"transparent"}},"\xa9 2019 Anders Boberg")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[132,1,2]]]);
//# sourceMappingURL=main.fa2275bd.chunk.js.map